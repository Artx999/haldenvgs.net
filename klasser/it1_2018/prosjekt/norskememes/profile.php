<?php



$databaseHost = "31.220.21.90";

$databaseUser = "haldenvg_norskeMemesAdmin";

$databasePassword = "arildogjacob";

$database = "haldenvg_norskeMemes";

$connection = new mysqli($databaseHost, $databaseUser, $databasePassword, $database);

if (mysqli_connect_error()) {

    echo "<script>alert('Could not connect to database')</script>";

    die();

}

$connection->set_charset("utf8");

session_start();

if (isset($_SESSION["userID"])) {

    $userID=$_SESSION["userID"];

}

else {

    header("index.php");

}



?>



<!DOCTYPE html>

<html lang="no">

<head>

    <!-- Meta Tags -->

    <meta charset="UTF-8">

    <meta name="description" content="">

    <meta name="keywords" content="Norsk,Memes">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ======= -->

    <!-- General -->

    <title>Norske Memes</title>

    <link rel="icon" href="pictures/favicon.png">

    <!-- ===== -->

    <!-- Fonts -->

    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:700" rel="stylesheet">

    <!-- ======= -->

    <!-- Scripts -->

    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.2/gsap.min.js"></script>

    <script src="https://unicons.iconscout.com/release/v3.0.0/script/monochrome/bundle.js"></script>

    <!-- =========== -->

    <!-- Stylesheets -->

    <link rel='stylesheet' type="text/css" href="style.css">

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.0/css/line.css">

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.0/css/solid.css">

</head>

<body>

<nav id="navbar">

    <div class="navbar-inner">

        <div class="navbar-left flexbox-left">

            <div id="nav-button">

                <span></span>

                <span></span>

                <span></span>

                <span></span>

            </div>

        </div>

        <div class="navbar-center flexbox">

            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 2000 2000" xml:space="preserve">

                <style type="text/css">

                    .st0{fill:#FE204D;}

                    .st1{fill:#FFFFFF;}

                </style>

                <g>

                    <path class="st0" d="M118.3,1006.61c-2.96,6.41-3.66,12.38-5.16,18.08c-3.87,14.72-7.52,29.51-10.95,44.35   c-0.96,4.12-2.73,5.36-6.99,5.28c-15.99-0.29-31.99-0.17-47.99-0.06c-3.34,0.02-4.84-0.05-3.74-4.38   c12.39-48.79,24.59-97.63,36.66-146.51c1.05-4.26,2.75-5.71,7.24-5.64c18.06,0.28,36.12,0.23,54.18,0.02   c3.82-0.04,5.39,1.22,6.43,4.82c5.49,19.08,11.23,38.09,16.91,57.12c0.43,1.42,1.09,2.78,1.61,4.08c2.1-0.04,1.91-1.46,2.18-2.52   c4.93-19.6,9.92-39.18,14.72-58.81c0.83-3.4,2.2-4.73,5.89-4.68c16.17,0.21,32.34,0.23,48.51,0c4.42-0.06,4.82,1.61,3.92,5.19   c-10.4,41.15-20.75,82.31-31.1,123.47c-2,7.96-4.06,15.91-5.89,23.92c-0.63,2.78-1.73,3.96-4.8,3.94   c-19.09-0.14-38.19-0.14-57.28,0c-3.21,0.02-4.45-1.14-5.31-4.09c-5.64-19.39-11.46-38.73-17.24-58.08   C119.64,1010.63,119.14,1009.18,118.3,1006.61z"/>

                    <path class="st0" d="M242.84,1016.7c1.48-32.24,15.43-58.15,40.88-77.8c28.95-22.35,61.45-29.97,97.03-20.25   c29.28,8,46.03,37.08,41.6,67.05c-7.04,47.65-47.7,84.62-94.38,91.06c-14.54,2.01-29.12,1.46-43.36-2.83   C258.62,1066.09,241.59,1041.96,242.84,1016.7z M338.47,969.56c-17.11,1.17-31.95,17.58-31.45,34.78   c0.36,12.3,10.6,20.59,22.64,18.33c16.24-3.05,28.3-17.11,28.78-33.55C358.79,977.11,350.27,968.76,338.47,969.56z"/>

                    <path class="st0" d="M543.29,1074.21c-9.46,0-18.93-0.22-28.38,0.1c-3.94,0.13-5.28-1.34-6.19-4.91c-3.49-13.76-7.3-27.45-11-41.16   c-0.13-0.49-0.34-0.97-0.54-1.45c-0.56-1.33-0.35-3.54-2.44-3.36c-1.58,0.14-1.44,2.13-1.75,3.34   c-3.52,13.77-7.14,27.52-10.32,41.37c-1.04,4.51-2.56,6.36-7.66,6.22c-15.47-0.43-30.96-0.26-46.44-0.08   c-4.16,0.05-5.63-0.28-4.37-5.24c12.42-48.79,24.56-97.65,36.66-146.52c0.83-3.33,2.21-4.83,5.79-4.95   c24.04-0.78,48.08-2.9,72.14-1.26c13.64,0.93,27.07,3.37,37.59,13.28c9.04,8.51,12.32,19.25,10.75,31.33   c-2.8,21.56-12.15,39.47-30.6,51.88c-2.67,1.8-1.24,3.55-0.58,5.31c6.23,16.49,12.53,32.96,18.8,49.43   c0.37,0.96,0.59,1.99,1.06,2.89c1.57,2.97,0.58,3.87-2.6,3.83C563.25,1074.13,553.27,1074.21,543.29,1074.21z M510.06,982.54   c7.24,0.36,12.59-2.78,16.03-9c3.38-6.13,0.99-13.01-5.02-14.62c-1.94-0.52-4.09-0.21-6.11-0.5c-3.5-0.49-5.28,0.64-5.9,4.39   c-0.77,4.69-2.21,9.26-3.41,13.88C504.12,982.61,504.1,982.6,510.06,982.54z"/>

                    <path class="st0" d="M810.58,976.5c5.48-8,10.97-15.99,16.42-24c7.14-10.49,14.32-20.95,21.31-31.53c1.67-2.53,3.68-3.15,6.47-3.14   c19.09,0.07,38.19,0.02,57.28,0.07c1.3,0,3.12-0.69,3.81,0.68c0.82,1.63-0.98,2.74-1.86,3.87c-16.61,20.99-33.22,41.99-49.95,62.88   c-8.64,10.79-8.74,10.7-4.12,23.87c7.09,20.19,14.06,40.42,21.31,60.55c1.39,3.87,0.52,4.57-3.31,4.54   c-19.26-0.15-38.53-0.12-57.8-0.02c-3.15,0.02-4.75-0.53-5.59-4.14c-3.79-16.34-7.99-32.59-12.17-48.84   c-0.53-2.05-0.36-4.5-2.9-6.48c-1.72,6.52-3.42,12.72-4.98,18.97c-2.98,11.95-5.97,23.91-8.76,35.91   c-0.78,3.35-2.06,4.71-5.83,4.65c-16.51-0.25-33.03-0.14-49.54-0.07c-2.88,0.01-4.26-0.09-3.3-3.84   c12.47-49.13,24.81-98.28,37-147.48c0.96-3.88,2.4-5.23,6.46-5.17c15.82,0.23,31.65,0.19,47.47,0.03c4.14-0.04,5.79,0.33,4.43,5.3   c-4.37,16.01-8.15,32.17-12.15,48.28c-0.36,1.46-0.6,2.96-0.89,4.44C809.8,976.04,810.19,976.27,810.58,976.5z"/>

                    <path class="st0" d="M956.76,1074.21c-19.27,0-38.55-0.11-57.82,0.08c-4.19,0.04-4.7-0.92-3.69-4.91   c12.4-48.99,24.61-98.02,36.78-147.06c0.85-3.42,2.36-4.56,5.99-4.55c36.83,0.15,73.65,0.15,110.48,0.01   c4.5-0.02,5.65,0.98,4.36,5.56c-3.19,11.38-6.02,22.86-8.64,34.38c-0.88,3.87-2.39,5.2-6.49,5.15c-17.55-0.25-35.1-0.15-52.66-0.04   c-1.65,0.01-4.06-1.26-4.91,1.31c-0.91,2.75-2.02,5.66-1.89,8.45c0.09,1.97,2.85,1.24,4.46,1.25c15.66,0.04,31.32,0.15,46.98-0.06   c4.41-0.06,6.06,0.34,4.57,5.51c-3.36,11.68-5.99,23.57-8.78,35.4c-0.73,3.09-2.33,3.99-5.43,3.97   c-16.52-0.14-33.04-0.07-49.56-0.06c-3.64,0-8.01,6.56-6.51,9.86c0.85,1.88,2.74,0.98,4.14,0.99c18.76,0.06,37.51,0.03,56.27,0.04   c6.19,0,6.19,0.02,4.7,5.95c-2.8,11.13-5.89,22.2-8.25,33.42c-0.97,4.63-3.09,5.47-7.31,5.42   C994.62,1074.1,975.69,1074.21,956.76,1074.21z"/>

                    <path class="st0" d="M685.13,914.56c20.66,0.44,37.75,5.38,51.46,19.08c4.95,4.94,4.91,5.07,0.29,10.28   c-7.41,8.34-14.92,16.59-22.16,25.07c-2.31,2.71-3.56,3.46-6.8,0.74c-6.66-5.6-14.32-9.45-23.5-8.94c-1.75,0.1-3.42,0.31-4.97,1.11   c-2.39,1.24-4.37,2.97-4.57,5.79c-0.2,2.67,2.03,3.8,3.96,4.9c7.31,4.15,15.47,6.48,22.73,10.85   c12.48,7.53,20.88,17.49,20.22,32.74c-0.54,12.32-4.8,23.5-13.13,32.79c-15.49,17.28-34.77,26.84-58.12,28.35   c-13.18,0.85-25.99-0.43-38.64-4.23c-10.48-3.15-19.2-8.99-27.01-16.42c-3.28-3.13-4.38-5.85-0.52-9.87   c8.08-8.41,15.66-17.3,23.27-26.14c2.18-2.53,3.39-2.59,6.09-0.36c9.27,7.67,19.99,11.81,32.23,11.51   c1.96-0.05,3.73-0.51,5.39-1.49c5.72-3.4,5.77-7.63-0.18-10.67c-5.64-2.88-11.59-5.16-17.31-7.89   c-32.87-15.7-29.46-43.51-15.52-63.67c13.17-19.05,32.45-29.07,55.24-32.45C677.99,914.99,682.43,914.26,685.13,914.56z"/>

                    <path class="st1" d="M1122.57,993.86c0.43,0.09,0.87,0.18,1.3,0.27c1.55,26.49,3.11,52.99,4.69,79.92c13.87,0,27.13-0.2,40.37,0.12   c4.37,0.11,6.51-1.47,8.53-5.15c12.98-23.65,26.19-47.17,39.35-70.72c0.79-1.41,1.74-2.73,2.62-4.09c0.37,0.21,0.75,0.41,1.12,0.62   c-6.54,26.22-13.09,52.44-19.72,79.02c19.27,0,37.87,0,56.82,0c12.69-50.66,25.36-101.2,38.09-152.03   c-1.56-0.26-2.36-0.51-3.15-0.51c-24.71-0.02-49.42-0.09-74.13,0.13c-1.79,0.02-4.3,1.79-5.23,3.44   c-11.94,21.16-23.64,42.45-35.43,63.7c-2.47,4.45-5.05,8.85-8.2,14.37c-0.48-2.22-0.8-3.11-0.85-4.02   c-1.31-24.09-2.68-48.17-3.78-72.26c-0.18-4.01-1.2-5.52-5.48-5.48c-23.7,0.19-47.41,0.17-71.11,0c-3.56-0.03-5,1.17-5.83,4.49   c-11.69,46.96-23.49,93.9-35.24,140.85c-0.58,2.33-0.93,4.72-1.47,7.51c18.47,0,36.26,0.08,54.06-0.17   c1.19-0.02,3.02-2.27,3.41-3.78c4.29-16.52,8.33-33.11,12.48-49.67C1118.02,1011.55,1120.31,1002.71,1122.57,993.86z    M1638.17,1073.78c12.68-50.61,25.34-101.14,38.07-151.96c-1.61-0.27-2.4-0.53-3.2-0.53c-24.71-0.02-49.42-0.11-74.13,0.14   c-1.87,0.02-4.44,2.09-5.46,3.89c-13.57,24.09-26.91,48.3-40.33,72.47c-0.81,1.46-1.83,2.8-2.75,4.19   c-2.28-25.39-3.79-50.3-4.9-75.22c-0.2-4.45-1.45-5.65-5.81-5.61c-23.36,0.2-46.73,0.22-70.09-0.02c-4.26-0.04-5.77,1.41-6.74,5.32   c-9.57,38.86-19.32,77.67-29.01,116.5c-2.54,10.16-5.08,20.32-7.71,30.84c19.28,0,37.88,0,56.79,0   c6.72-26.69,13.4-53.23,20.07-79.77c0.47,0.04,0.93,0.08,1.4,0.13c1.56,26.53,3.13,53.07,4.71,79.88c14.22,0,27.66-0.14,41.09,0.09   c3.74,0.07,5.66-1.26,7.41-4.44c11.36-20.71,22.92-41.32,34.44-61.94c2.54-4.55,5.21-9.04,7.82-13.55   c0.41,0.18,0.82,0.36,1.24,0.55c-6.55,26.22-13.09,52.44-19.73,79.04C1600.4,1073.78,1618.85,1073.78,1638.17,1073.78z    M1352.2,1030.18c1.51-10.48,1.51-10.48,11.14-10.48c14.45,0,28.9,0.09,43.35-0.12c1.72-0.02,4.6-1.34,4.94-2.61   c3.66-13.38,6.91-26.87,10.48-41.18c-19.02,0-37.52,0-56.62,0c1-4.04,1.78-7.22,2.64-10.68c2.03,0,3.86,0,5.69,0   c16.97,0,33.94-0.08,50.92,0.07c3.19,0.03,4.81-0.75,5.6-4.08c2.8-11.89,5.92-23.71,8.85-35.57c0.3-1.2,0.17-2.52,0.26-4.27   c-2.13,0-3.79,0-5.45,0c-35.46,0-70.91,0.09-106.37-0.12c-4.5-0.03-6.01,1.58-7.01,5.62c-8.79,35.76-17.76,71.48-26.69,107.2   c-3.28,13.13-6.58,26.26-9.89,39.43c0.79,0.27,1.25,0.56,1.71,0.56c39.15,0.04,78.3,0.09,117.46-0.06c1.32-0.01,3.45-1.91,3.82-3.3   c2.98-10.98,5.64-22.05,8.34-33.11c0.53-2.16,0.85-4.37,1.41-7.31C1394.72,1030.18,1373.5,1030.18,1352.2,1030.18z    M1732.33,1030.29c0.44-2.04,0.78-3,0.83-3.98c0.31-5.46,3.02-6.96,8.48-6.77c13.6,0.46,27.23,0.15,40.84,0.15   c8.99,0,9.07,0.02,11.35-8.88c2.93-11.42,5.73-22.88,8.8-35.21c-19.23,0-37.73,0-56.66,0c1-3.99,1.79-7.16,2.62-10.49   c2.21,0,4.05,0,5.88,0c16.98,0,33.96-0.08,50.94,0.07c3.3,0.03,4.66-1.01,5.42-4.28c2.63-11.42,5.65-22.75,8.47-34.13   c0.39-1.56,0.53-3.18,0.9-5.51c-2.58,0-4.55,0-6.51,0c-34.97,0-69.93,0.1-104.9-0.12c-4.74-0.03-6.64,1.28-7.78,5.93   c-9.58,39.03-19.44,77.99-29.2,116.98c-2.46,9.82-4.84,19.65-7.38,29.99c13.75,0,26.84,0,39.93,0c25.89,0,51.78,0,77.67-0.01   c2.47,0,4.81,0.47,5.64-3.24c2.41-10.78,5.3-21.46,7.96-32.18c0.62-2.51,1.09-5.05,1.79-8.32   C1775.38,1030.29,1754.14,1030.29,1732.33,1030.29z M1929.24,974.13c8.79-9.9,17.52-19.86,26.42-29.67   c2.09-2.3,1.25-4.17-0.47-5.59c-5.39-4.47-10.47-9.7-16.6-12.84c-20.41-10.45-41.87-10.38-63.11-3   c-19.02,6.61-34.77,18.02-42.98,37.06c-7.08,16.42-7.93,36.82,14.61,49.39c7.15,3.99,14.8,7.09,22,11   c2.08,1.13,5.01,4.05,4.67,5.47c-0.54,2.29-3.28,4.29-5.48,5.86c-1.2,0.85-3.21,0.77-4.86,0.77c-12.85-0.02-23.66-5.19-33.52-13.71   c-8.63,9.75-17.03,19.53-25.79,28.98c-2.9,3.13-2.56,5.35,0.06,8.06c7.48,7.73,16.17,13.6,26.49,16.83   c12.62,3.96,25.51,5.26,38.76,4.36c22.43-1.53,41.03-10.69,56.07-27.15c8.22-8.99,12.55-19.83,13.26-31.9   c0.89-15.14-6.93-25.48-19.63-32.48c-6.88-3.79-14.3-6.62-21.19-10.4c-2.08-1.15-4.95-4.96-4.42-5.95c1.31-2.46,4.3-5.48,6.73-5.58   c5.03-0.21,10.4,0.6,15.13,2.34C1920.14,967.73,1924.28,971.12,1929.24,974.13z"/>

                </g>

            </svg>

        </div>

        <?php

        if (isset($_SESSION["userID"])) {

            $SQL = "SELECT * FROM `haldenvg_norskeMemes`.users WHERE `username`='$userID'";

            $result=$connection->query($SQL);

            if (!$result) {

                echo "

                <div class='navbar-right flexbox-right'>

                    <a href='logout.php' title='Logg ut'>

                        <i class='uil uil-sign-out-alt'></i>

                    </a>

                </div>";

            }

            else {

                $data=$result->fetch_assoc();

                $profilePicture=$data['profilepicture'];

                echo '

                <div class="navbar-right flexbox-right">

                    <a class="profile-picture">

                        <img alt="" src="data:;base64,'.base64_encode($profilePicture).'" width="100%" height="100%">

                    </a>

                </div>';

            }

        }

        ?>

    </div>

</nav>

<div id="menu" class="flexbox-col">

    <div class="menu-item"><a href="profile.php"><i class="uil uil-user"></i> Din profil</a></div>

    <div class="menu-item"><a><i class="uil uil-plus"></i> Lag ny meme</a></div>

    <div class="menu-item"><a href="logout.php"><i class="uil uil-arrow-right"></i> Logg ut</a></div>

</div>

<main class="flexbox-col">



    <div class="profile-top flexbox">



        <div class="profile-left">

            <form class="profile-pic-upload" method="post" action="" enctype="multipart/form-data">

                <div class="profile-pic-wrapper">

                    <fieldset class="profile-pic-upload-input">

                        <input type="file" name="image" id="choose-profile-picture" value="Velg bilde" accept="images">

                    </fieldset>

                    <?php echo '<a class="profile-pic"><img alt="" src="data:;base64,'.base64_encode($profilePicture).'"></a>'; ?>

                    <div class="profile-pic-note flexbox">

                        <p>Upload Photo</p>

                    </div>

                </div>



                <div id="profile-pic-uploader" class="flexbox">

                    <div class="profile-pic-uploader-inner flexbox">

                        <fieldset class="flexbox">

                            <div class="flexbox-col">

                                <a class="profile-pic-small"><img id="profile-img-tag" src="" alt=""></a>

                                <input type="submit" name="upload-profile-picture" id="upload-profile-picture" value="Last opp bilde">

                            </div>

                        </fieldset>

                    </div>

                    <div class="profile-pic-wrapper-overlay"></div>

                </div>

            </form>

        </div>



        <div class="profile-right flexbox-start-col">

            <div class="profile-right-top">

                <h3 class="profile-name"><?php echo "$userID" ?></h3>

            </div>

            <div class="profile-right-bottom">

                <div class="profile-bio-wrapper">

                    <p class="profile-bio">

                        Velkommen til min profil

                        <br/>

                        Hei, dette er meg og min profil, like mine memes om du vil.

                        <br/>

                        <br/>

                        <span>@memeguy420</span>

                        <br/>

                        <span>@friend2</span>

                    </p>

                </div>

            </div>

        </div>



    </div>



    <div class="posts">

        <div class="space"></div>

    </div>





    <?php

    if (isset($_POST["upload-profile-picture"])) {

        $getImage = addslashes(file_get_contents($_FILES["image"]["tmp_name"]));

        $image = $_FILES["image"]["name"];

        $extension = pathinfo($image, PATHINFO_EXTENSION);

        if ($extension == "jpg" OR $extension == "png") {

            $SQL = "UPDATE `haldenvg_norskeMemes`.users SET `profilepicture`='$getImage' WHERE `username`='$userID'";

            $res=$connection->query($SQL);

            echo "<script>window.location.href='profile.php'</script>";

        }

        else {

            echo "<script>alert('error')</script>";

        }

    }

    ?>



</main>

</body>

<script src="javascript.js"></script>

</html>

